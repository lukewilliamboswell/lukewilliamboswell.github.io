<!DOCTYPE html><html  lang="en"><head><title>title</title><meta  charset="utf-8"></meta><meta  name="viewport" content="width=device-width"></meta><link  rel="icon" href="/favicon.svg"></link><link  rel="stylesheet" href="/styles.css"></link></head><body><div  class="top-header-extension"></div><header  class="top-header"><div  class="pkg-and-logo"><a  class="logo" href="/"><svg  viewBox="0 -6 51 58" fill="none" xmlns="http://www.w3.org/2000/svg" aria-labelledby="logo-link" role="img"><title  id="logo-link">Return to Roc packages</title><polygon  role="presentation" points="0,0 23.8834,3.21052 37.2438,19.0101 45.9665,16.6324 50.5,22 45,22 44.0315,26.3689 26.4673,39.3424 27.4527,45.2132 17.655,53 23.6751,22.7086"></polygon></svg></a><h1  class="pkg-full-name"><a  href="/index.html">Examples</a></h1></div><div  class="top-header-triangle"></div></header><main><h1>Problem - Towers of Hanoi</h1>
<p>This is a Roc solution for the popular <a href="https://en.wikipedia.org/wiki/Tower_of_Hanoi">Towers of Hanoi</a> problem.</p>
<h2>Output</h2>
<pre><samp>% roc run main.roc -- 3
Move disk from A to B
Move disk from A to C
Move disk from B to C
Move disk from A to B
Move disk from C to A
Move disk from C to B
Move disk from A to B
</pre></samp>
<h2>Code</h2>
<pre><samp><span class="kw">app</span><span class="literal"> "example"</span><span class="kw">
    packages</span><span class="delimeter"> {</span><span class="lowerident"> pf</span><span class="kw">:</span><span class="literal"> "https://github.com/roc-lang/basic-cli/releases/download/0.3.1/97mY3sUwo433-pcnEQUlMhn-sWiIf_J9bPhcAFZoqY4.tar.br"</span><span class="delimeter"> }</span><span class="kw">
    imports</span><span class="delimeter"> [</span><span class="lowerident">
        pf</span><span class="delimeter">.</span><span class="upperident">Stdout</span><span class="delimeter">,</span><span class="lowerident">
        pf</span><span class="delimeter">.</span><span class="upperident">Task</span><span class="delimeter">.</span><span class="delimeter">{</span><span class="lowerident"> await</span><span class="delimeter"> }</span><span class="delimeter">,</span><span class="lowerident">
        pf</span><span class="delimeter">.</span><span class="upperident">Arg</span><span class="delimeter">,</span><span class="delimeter">
    ]</span><span class="kw">
    provides</span><span class="delimeter"> [</span><span class="lowerident">main</span><span class="delimeter">]</span><span class="kw"> to</span><span class="lowerident"> pf</span><span class="upperident">

TaskErrors</span><span class="kw"> :</span><span class="delimeter"> [</span><span class="upperident">InvalidArg</span><span class="delimeter">,</span><span class="upperident"> InvalidNumStr</span><span class="delimeter">]</span><span class="lowerident">

main</span><span class="kw"> =</span><span class="lowerident">
    task</span><span class="kw"> =</span><span class="lowerident">
        args</span><span class="kw"> &lt;-</span><span class="lowerident"> readArgs</span><span class="kw"> |&gt;</span><span class="lowerident"> await</span><span class="delimeter">

        {</span><span class="lowerident">
            numDisks</span><span class="kw">:</span><span class="lowerident"> args</span><span class="delimeter">.</span><span class="lowerident">numDisks</span><span class="delimeter">,</span><span class="lowerident">
            from</span><span class="kw">:</span><span class="literal"> "A"</span><span class="delimeter">,</span><span class="lowerident">
            to</span><span class="kw">:</span><span class="literal"> "B"</span><span class="delimeter">,</span><span class="lowerident">
            using</span><span class="kw">:</span><span class="literal"> "C"</span><span class="delimeter">,</span><span class="lowerident">
            moves</span><span class="kw">:</span><span class="delimeter"> [</span><span class="delimeter">]</span><span class="delimeter">,</span><span class="delimeter">
        }</span><span class="kw">
        |&gt;</span><span class="lowerident"> hanoi</span><span class="kw">
        |&gt;</span><span class="upperident"> List</span><span class="delimeter">.</span><span class="lowerident">map</span><span class="kw"> \</span><span class="delimeter">(</span><span class="lowerident">from</span><span class="delimeter">,</span><span class="lowerident"> to</span><span class="delimeter">)</span><span class="kw"> -&gt;</span><span class="literal"> "Move disk from \(from) to \(to)"</span><span class="kw">
        |&gt;</span><span class="upperident"> Str</span><span class="delimeter">.</span><span class="lowerident">joinWith</span><span class="literal"> "\n"</span><span class="kw">
        |&gt;</span><span class="upperident"> Task</span><span class="delimeter">.</span><span class="lowerident">succeed</span><span class="lowerident">

    taskResult</span><span class="kw"> &lt;-</span><span class="upperident"> Task</span><span class="delimeter">.</span><span class="lowerident">attempt</span><span class="lowerident"> task</span><span class="kw">

    when</span><span class="lowerident"> taskResult</span><span class="kw"> is</span><span class="upperident">
        Ok</span><span class="lowerident"> result</span><span class="kw"> -&gt;</span><span class="upperident"> Stdout</span><span class="delimeter">.</span><span class="lowerident">line</span><span class="lowerident"> result</span><span class="upperident">
        Err</span><span class="upperident"> InvalidArg</span><span class="kw"> -&gt;</span><span class="upperident"> Stdout</span><span class="delimeter">.</span><span class="lowerident">line</span><span class="literal"> "Error: Please provide the number of disks as an argument."</span><span class="upperident">
        Err</span><span class="upperident"> InvalidNumStr</span><span class="kw"> -&gt;</span><span class="upperident"> Stdout</span><span class="delimeter">.</span><span class="lowerident">line</span><span class="literal"> "Error: Invalid number format. Please provide a positive integer."</span><span class="lowerident">

readArgs</span><span class="kw"> :</span><span class="upperident"> Task</span><span class="delimeter">.</span><span class="upperident">Task</span><span class="delimeter"> {</span><span class="lowerident"> numDisks</span><span class="kw"> :</span><span class="upperident"> U32</span><span class="delimeter"> }</span><span class="upperident"> TaskErrors</span><span class="lowerident">
readArgs</span><span class="kw"> =</span><span class="upperident">
    Arg</span><span class="delimeter">.</span><span class="lowerident">list</span><span class="kw">
    |&gt;</span><span class="upperident"> Task</span><span class="delimeter">.</span><span class="lowerident">mapFail</span><span class="kw"> \</span><span class="lowerident">_</span><span class="kw"> -&gt;</span><span class="upperident"> InvalidArg</span><span class="kw">
    |&gt;</span><span class="lowerident"> await</span><span class="kw"> \</span><span class="lowerident">args</span><span class="kw"> -&gt;</span><span class="lowerident">
        numDisksResult</span><span class="kw"> =</span><span class="upperident"> List</span><span class="delimeter">.</span><span class="lowerident">get</span><span class="lowerident"> args</span><span class="literal"> 1</span><span class="kw"> |&gt;</span><span class="upperident"> Result</span><span class="delimeter">.</span><span class="lowerident">try</span><span class="upperident"> Str</span><span class="delimeter">.</span><span class="lowerident">toU32</span><span class="kw">

        when</span><span class="lowerident"> numDisksResult</span><span class="kw"> is</span><span class="upperident">
            Ok</span><span class="lowerident"> numDisks</span><span class="kw"> -&gt;</span><span class="kw">
                if</span><span class="lowerident"> numDisks</span><span class="op"> &lt;</span><span class="literal"> 1</span><span class="kw"> then</span><span class="upperident">
                    Task</span><span class="delimeter">.</span><span class="lowerident">fail</span><span class="upperident"> InvalidNumStr</span><span class="kw">
                else</span><span class="upperident">
                    Task</span><span class="delimeter">.</span><span class="lowerident">succeed</span><span class="delimeter"> {</span><span class="lowerident"> numDisks</span><span class="delimeter"> }</span><span class="lowerident">

            _</span><span class="kw"> -&gt;</span><span class="upperident"> Task</span><span class="delimeter">.</span><span class="lowerident">fail</span><span class="upperident"> InvalidNumStr</span><span class="comment">

## Solves the Tower of Hanoi problem using recursion.</span><span class="comment">
##</span><span class="comment">
## `numDisks` - The number of disks in the Tower of Hanoi problem.</span><span class="comment">
## `from` - The identifier of the source rod.</span><span class="comment">
## `to` - The identifier of the target rod.</span><span class="comment">
## `using` - The identifier of the auxiliary rod.</span><span class="comment">
## `moves` - A list of moves accumulated so far.</span><span class="comment">
##</span><span class="comment">
## Returns a list of moves (tuples) to solve the Tower of Hanoi problem.</span><span class="comment">
##</span><span class="lowerident">
hanoi</span><span class="kw"> =</span><span class="kw"> \</span><span class="delimeter">{</span><span class="lowerident"> numDisks</span><span class="delimeter">,</span><span class="lowerident"> from</span><span class="delimeter">,</span><span class="lowerident"> to</span><span class="delimeter">,</span><span class="lowerident"> using</span><span class="delimeter">,</span><span class="lowerident"> moves</span><span class="delimeter"> }</span><span class="kw"> -&gt;</span><span class="kw">
    if</span><span class="lowerident"> numDisks</span><span class="op"> ==</span><span class="literal"> 1</span><span class="kw"> then</span><span class="upperident">
        List</span><span class="delimeter">.</span><span class="lowerident">concat</span><span class="lowerident"> moves</span><span class="delimeter"> [</span><span class="delimeter">(</span><span class="lowerident">from</span><span class="delimeter">,</span><span class="lowerident"> to</span><span class="delimeter">)</span><span class="delimeter">]</span><span class="kw">
    else</span><span class="lowerident">
        moves1</span><span class="kw"> =</span><span class="lowerident"> hanoi</span><span class="delimeter"> {</span><span class="lowerident">
            numDisks</span><span class="kw">:</span><span class="delimeter"> (</span><span class="lowerident">numDisks</span><span class="op"> -</span><span class="literal"> 1</span><span class="delimeter">)</span><span class="delimeter">,</span><span class="lowerident">
            from</span><span class="delimeter">,</span><span class="lowerident">
            to</span><span class="kw">:</span><span class="lowerident"> using</span><span class="delimeter">,</span><span class="lowerident">
            using</span><span class="kw">:</span><span class="lowerident"> to</span><span class="delimeter">,</span><span class="lowerident">
            moves</span><span class="delimeter">,</span><span class="delimeter">
        }</span><span class="lowerident">

        moves2</span><span class="kw"> =</span><span class="upperident"> List</span><span class="delimeter">.</span><span class="lowerident">concat</span><span class="lowerident"> moves1</span><span class="delimeter"> [</span><span class="delimeter">(</span><span class="lowerident">from</span><span class="delimeter">,</span><span class="lowerident"> to</span><span class="delimeter">)</span><span class="delimeter">]</span><span class="lowerident">

        hanoi</span><span class="delimeter"> {</span><span class="lowerident">
            numDisks</span><span class="kw">:</span><span class="delimeter"> (</span><span class="lowerident">numDisks</span><span class="op"> -</span><span class="literal"> 1</span><span class="delimeter">)</span><span class="delimeter">,</span><span class="lowerident">
            from</span><span class="kw">:</span><span class="lowerident"> using</span><span class="delimeter">,</span><span class="lowerident">
            to</span><span class="delimeter">,</span><span class="lowerident">
            using</span><span class="kw">:</span><span class="lowerident"> from</span><span class="delimeter">,</span><span class="lowerident">
            moves</span><span class="kw">:</span><span class="lowerident"> moves2</span><span class="delimeter">,</span><span class="delimeter">
        }</span><span class="lowerident">

tc</span><span class="kw"> =</span><span class="delimeter"> {</span><span class="lowerident"> numDisks</span><span class="kw">:</span><span class="literal"> 1</span><span class="delimeter">,</span><span class="lowerident"> from</span><span class="kw">:</span><span class="literal"> "A"</span><span class="delimeter">,</span><span class="lowerident"> to</span><span class="kw">:</span><span class="literal"> "B"</span><span class="delimeter">,</span><span class="lowerident"> using</span><span class="kw">:</span><span class="literal"> "C"</span><span class="delimeter">,</span><span class="lowerident"> moves</span><span class="kw">:</span><span class="delimeter"> [</span><span class="delimeter">]</span><span class="delimeter"> }</span><span class="comment">

## Test Case 1: Tower of Hanoi with 1 disk</span><span class="kw">
expect</span><span class="lowerident"> hanoi</span><span class="delimeter"> {</span><span class="lowerident"> tc</span><span class="kw"> &amp;</span><span class="lowerident"> numDisks</span><span class="kw">:</span><span class="literal"> 1</span><span class="delimeter"> }</span><span class="op"> ==</span><span class="delimeter"> [</span><span class="delimeter">(</span><span class="literal">"A"</span><span class="delimeter">,</span><span class="literal"> "B"</span><span class="delimeter">)</span><span class="delimeter">]</span><span class="comment">

## Test Case 2: Tower of Hanoi with 2 disks</span><span class="kw">
expect</span><span class="lowerident"> hanoi</span><span class="delimeter"> {</span><span class="lowerident"> tc</span><span class="kw"> &amp;</span><span class="lowerident"> numDisks</span><span class="kw">:</span><span class="literal"> 2</span><span class="delimeter"> }</span><span class="op"> ==</span><span class="delimeter"> [</span><span class="delimeter">(</span><span class="literal">"A"</span><span class="delimeter">,</span><span class="literal"> "C"</span><span class="delimeter">)</span><span class="delimeter">,</span><span class="delimeter"> (</span><span class="literal">"A"</span><span class="delimeter">,</span><span class="literal"> "B"</span><span class="delimeter">)</span><span class="delimeter">,</span><span class="delimeter"> (</span><span class="literal">"C"</span><span class="delimeter">,</span><span class="literal"> "B"</span><span class="delimeter">)</span><span class="delimeter">]</span><span class="comment">

## Test Case 3: Tower of Hanoi with 3 disks</span><span class="kw">
expect</span><span class="lowerident"> hanoi</span><span class="delimeter"> {</span><span class="lowerident"> tc</span><span class="kw"> &amp;</span><span class="lowerident"> numDisks</span><span class="kw">:</span><span class="literal"> 3</span><span class="delimeter"> }</span><span class="op"> ==</span><span class="delimeter"> [</span><span class="delimeter">(</span><span class="literal">"A"</span><span class="delimeter">,</span><span class="literal"> "B"</span><span class="delimeter">)</span><span class="delimeter">,</span><span class="delimeter"> (</span><span class="literal">"A"</span><span class="delimeter">,</span><span class="literal"> "C"</span><span class="delimeter">)</span><span class="delimeter">,</span><span class="delimeter"> (</span><span class="literal">"B"</span><span class="delimeter">,</span><span class="literal"> "C"</span><span class="delimeter">)</span><span class="delimeter">,</span><span class="delimeter"> (</span><span class="literal">"A"</span><span class="delimeter">,</span><span class="literal"> "B"</span><span class="delimeter">)</span><span class="delimeter">,</span><span class="delimeter"> (</span><span class="literal">"C"</span><span class="delimeter">,</span><span class="literal"> "A"</span><span class="delimeter">)</span><span class="delimeter">,</span><span class="delimeter"> (</span><span class="literal">"C"</span><span class="delimeter">,</span><span class="literal"> "B"</span><span class="delimeter">)</span><span class="delimeter">,</span><span class="delimeter"> (</span><span class="literal">"A"</span><span class="delimeter">,</span><span class="literal"> "B"</span><span class="delimeter">)</span><span class="delimeter">]</span></samp></pre></main><footer><p>Made by people who like to make nice things.</p><p> © 2023</p></footer></body></html>